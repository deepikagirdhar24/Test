import java.time.LocalDate;
import java.time.format.DateTimeFormatter;
import java.util.Map;

public class Payloads {

    public static WorkRequest buildWorkRequestPayload(Map<String, String> mapWorkRequestDetails) {

        WorkRequest workRequest = new WorkRequest();

        workRequest.setStrBpId(mapWorkRequestDetails.get("bpId"));
        workRequest.setStrType(mapWorkRequestDetails.get("type"));
        workRequest.setStrSubject(mapWorkRequestDetails.get("subject"));
        workRequest.setStrDescription(mapWorkRequestDetails.get("description"));

        // Always set dueDate to +1 week from today in yyyy-MM-dd format
        String dueDate = LocalDate.now().plusWeeks(1)
                .format(DateTimeFormatter.ofPattern("yyyy-MM-dd"));
        workRequest.setStrDueDate(dueDate);

        return workRequest;
    }
}
