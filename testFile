@And("I verify the {string} is {string}")
public void iVerifyTheKeyValue(String key, String expectedValue) throws Exception {
    String actualValue = JsonHelper.extractStringField(response, key);
    ExtentCucumberAdapter.addTestStepLog("Expected " + key + ": " + expectedValue + ", Actual: " + actualValue);
    Assert.assertEquals(expectedValue, actualValue);
}

@And("I verify the boolean {string} is {string}")
public void iVerifyBooleanValue(String key, String expectedValue) throws Exception {
    boolean actualValue = JsonHelper.extractBooleanField(response, key);
    boolean expectedBool = Boolean.parseBoolean(expectedValue);
    ExtentCucumberAdapter.addTestStepLog("Expected " + key + ": " + expectedBool + ", Actual: " + actualValue);
    Assert.assertEquals(expectedBool, actualValue);
}


@And("I verify the {string} array contains {string}")
public void iVerifyArrayContainsValue(String arrayKey, String expectedValue) throws Exception {
    boolean exists = JsonHelper.valueExistsInJsonArray(response, arrayKey, expectedValue);
    ExtentCucumberAdapter.addTestStepLog("Checking if " + expectedValue + " exists in array " + arrayKey + ": " + exists);
    Assert.assertTrue("Expected value not found in array: " + expectedValue, exists);
Assert.assertTrue(exists, "Expected value not found in array: " + expectedValue);

}


  And I verify the personIds array contains "<Item>"
  And I verify the subject is "<Subject>"
  And I verify the notes is "<Notes>"
  And I verify the boolean hasFollowup is "<HasFollowup>"
