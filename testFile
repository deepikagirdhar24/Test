@And("I verify the string field {string} is {string} in Money Account response")
public void iVerifyStringFieldEquals(String jsonPath, String expectedValue) throws Exception {
    if ("NA".equalsIgnoreCase(expectedValue)) {
        boolean exists = jsonHelper.hasField(response, jsonPath);
        ExtentCucumberAdapter.addTestStepLog("Checking absence of field '" + jsonPath + "'");
        Assert.assertFalse(exists, "Expected field '" + jsonPath + "' to be absent, but it was found.");
    } else {
        String actualValue = jsonHelper.extractStringField(response, jsonPath);
        ExtentCucumberAdapter.addTestStepLog("Expected value at '" + jsonPath + "': " + expectedValue + ", Actual: " + actualValue);
        Assert.assertEquals(actualValue, expectedValue, "Mismatch at: " + jsonPath);
    }
}

public boolean hasField(Response response, String jsonPath) {
    try {
        Object fieldValue = response.jsonPath().get(jsonPath);
        return fieldValue != null;
    } catch (Exception e) {
        return false; // Path does not exist
    }
}
