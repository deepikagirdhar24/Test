public static void validateFieldExistsInArray(Response response, String arrayPath, String fieldName) throws Exception {
    JsonNode rootNode = objectMapper.readTree(response.asString());
    JsonNode arrayNode = rootNode.at(arrayPath); // Must start with '/'

    if (!arrayNode.isArray()) {
        throw new Exception("Expected an array at path: " + arrayPath);
    }

    for (JsonNode element : arrayNode) {
        JsonNode fieldNode = element.get(fieldName);
        if (fieldNode == null || fieldNode.asText().isEmpty()) {
            throw new AssertionError("Missing or empty '" + fieldName + "' in one of the elements at: " + arrayPath);
        }
    }

    ExtentCucumberAdapter.addTestStepLog("All elements in array " + arrayPath + " contain a valid '" + fieldName + "'");
}


JsonHelper.validateFieldExistsInArray(response, "/privateBanker/teams", "id");
