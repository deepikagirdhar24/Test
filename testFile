@And("I verify the {string} array contains {string}")
public void iVerifyArrayContainsValue(String arrayName, String expectedValue) throws Exception {
    boolean valueExists = JsonHelper.valueExistsInJsonArray(response, arrayName, expectedValue);
    ExtentCucumberAdapter.addTestStepLog("Checking if " + expectedValue + " exists in array '" + arrayName + "': " + valueExists);
    Assert.assertTrue(valueExists, "Expected value not found in '" + arrayName + "' array: " + expectedValue);
}

@And("I verify the string field {string} is {string}")
public void iVerifyStringFieldEquals(String fieldName, String expectedValue) throws Exception {
    String actualValue = JsonHelper.extractStringField(response, fieldName);
    ExtentCucumberAdapter.addTestStepLog("Expected " + fieldName + ": " + expectedValue + ", Actual: " + actualValue);
    Assert.assertEquals(actualValue, expectedValue, fieldName + " mismatch");
}

@And("I verify the boolean field {string} is {word}")
public void iVerifyBooleanFieldEquals(String fieldName, String expectedBool) throws Exception {
    boolean expectedValue = Boolean.parseBoolean(expectedBool);
    boolean actualValue = JsonHelper.extractBooleanField(response, fieldName);
    ExtentCucumberAdapter.addTestStepLog("Expected " + fieldName + ": " + expectedValue + ", Actual: " + actualValue);
    Assert.assertEquals(actualValue, expectedValue, fieldName + " mismatch");
}

Scenario Outline: Verify the Get Contact Notes API
  Given Send Request to get Authentication Token for ICOS
  When I generate the JWT Token
  Then Send Request to get Contact Note Information
  And I verify the Status Code for Contact Notes "<StatusCode>"
  And I verify the "personIds" array contains "<Item>"
  And I verify the string field "subject" is "<Subject>"
  And I verify the string field "notes" is "<Notes>"
  And I verify the boolean field "hasFollowup" is <HasFollowup>

Examples:
  | StatusCode | Item      | Subject | Notes | HasFollowup |
  | 200        | 665321701 | Subject | Notes | true        |
