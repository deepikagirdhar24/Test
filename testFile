private JsonNode getNodeByPath(JsonNode rootNode, String path) {
    String[] keys = path.split("\\.");
    for (String key : keys) {
        if (rootNode == null) break;

        // Check if key has array notation like field[0]
        if (key.matches(".+\\[\\d+\\]")) {
            String fieldName = key.substring(0, key.indexOf("["));
            int index = Integer.parseInt(key.substring(key.indexOf("[") + 1, key.indexOf("]")));
            rootNode = rootNode.path(fieldName);
            if (rootNode.isArray() && rootNode.size() > index) {
                rootNode = rootNode.get(index);
            } else {
                return null; // index out of bounds
            }
        } else {
            rootNode = rootNode.path(key);
        }
    }
    return rootNode;
}
