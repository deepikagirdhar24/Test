//
// Source code recreated from a .class file by IntelliJ IDEA
// (powered by FernFlower decompiler)
//

package tech.grasshopper.pdf.extent;

import com.aventstack.extentreports.model.Report;
import com.aventstack.extentreports.observer.ReportObserver;
import com.aventstack.extentreports.observer.entity.ReportEntity;
import com.aventstack.extentreports.reporter.AbstractFileReporter;
import io.reactivex.rxjava3.core.Observer;
import io.reactivex.rxjava3.disposables.Disposable;
import java.io.File;
import java.util.logging.Level;
import java.util.logging.Logger;
import tech.grasshopper.pdf.PDFCucumberReport;
import tech.grasshopper.pdf.data.ReportData;
import tech.grasshopper.pdf.section.details.executable.MediaCleanup.CleanupType;
import tech.grasshopper.pdf.section.details.executable.MediaCleanup.MediaCleanupOption;

public class ExtentPDFCucumberReporter extends AbstractFileReporter implements ReportObserver<ReportEntity> {
    private static final Logger logger = Logger.getLogger(ExtentPDFCucumberReporter.class.getName());
    private static final String REPORTER_NAME = "pdf";
    private static final String FILE_NAME = "Index.pdf";
    private Disposable disposable;
    private Report report;
    private String mediaFolder;
    private MediaCleanupOption mediaCleanupOption;

    public ExtentPDFCucumberReporter(String path, String mediaFolder) {
        this(new File(path), mediaFolder, MediaCleanupOption.builder().cleanUpType(CleanupType.NONE).build());
    }

    public ExtentPDFCucumberReporter(File f, String mediaFolder) {
        this(f, mediaFolder, MediaCleanupOption.builder().cleanUpType(CleanupType.NONE).build());
    }

    public ExtentPDFCucumberReporter(String path, String mediaFolder, MediaCleanupOption mediaCleanupOption) {
        this(new File(path), mediaFolder, mediaCleanupOption);
    }

    public ExtentPDFCucumberReporter(File f, String mediaFolder, MediaCleanupOption mediaCleanupOption) {
        super(f);
        this.mediaFolder = mediaFolder;
        this.mediaCleanupOption = mediaCleanupOption;
    }

    public Observer<ReportEntity> getReportObserver() {
        return new Observer<ReportEntity>() {
            public void onSubscribe(Disposable d) {
                ExtentPDFCucumberReporter.this.start(d);
            }

            public void onNext(ReportEntity value) {
                ExtentPDFCucumberReporter.this.flush(value);
            }

            public void onError(Throwable e) {
            }

            public void onComplete() {
            }
        };
    }

    private void start(Disposable d) {
        this.disposable = d;
    }

    private void flush(ReportEntity value) {
        try {
            this.report = value.getReport();
            String filePath = this.getFileNameAsExt("Index.pdf", new String[]{".pdf"});
            ExtentPDFReportDataGenerator generator = new ExtentPDFReportDataGenerator(this.mediaFolder);
            ReportData reportData = generator.generateReportData(this.report);
            PDFCucumberReport pdfCucumberReport = new PDFCucumberReport(reportData, new File(filePath), this.mediaCleanupOption);
            pdfCucumberReport.createReport();
        } catch (Exception var6) {
            this.disposable.dispose();
            logger.log(Level.SEVERE, "An exception occurred", var6);
        }

    }
}

error as - 

Jun 05, 2025 6:29:22 AM tech.grasshopper.pdf.PDFCucumberReport collectReportConfiguration
INFO: PDF report configuration YAML file not found. Using default settings.
Jun 05, 2025 6:29:34 AM tech.grasshopper.pdf.extent.ExtentPDFCucumberReporter flush
SEVERE: An exception occurred
org.vandeseer.easytable.RowIsTooHighException: There is a row that is too high to be drawn on a single page
	at org.vandeseer.easytable.TableDrawer.computeRowsOnPagesWithNewPageStartOf(TableDrawer.java:115)
	at org.vandeseer.easytable.TableDrawer.draw(TableDrawer.java:152)
	at org.vandeseer.easytable.RepeatedHeaderTableDrawer.draw(RepeatedHeaderTableDrawer.java:59)
	at tech.grasshopper.pdf.structure.TableCreator.drawTable(TableCreator.java:64)
	at tech.grasshopper.pdf.structure.ExecutableTableCreator.displayTable(ExecutableTableCreator.java:15)
	at tech.grasshopper.pdf.section.details.DetailedStepHookDisplay.display(DetailedStepHookDisplay.java:75)
	at tech.grasshopper.pdf.section.details.DetailedSection.createSection(DetailedSection.java:55)
	at tech.grasshopper.pdf.PDFCucumberReport.createReport(PDFCucumberReport.java:102)
	at tech.grasshopper.pdf.extent.ExtentPDFCucumberReporter.flush(ExtentPDFCucumberReporter.java:81)
	at tech.grasshopper.pdf.extent.ExtentPDFCucumberReporter.access$100(ExtentPDFCucumberReporter.java:19)
	at tech.grasshopper.pdf.extent.ExtentPDFCucumberReporter$1.onNext(ExtentPDFCucumberReporter.java:56)
	at tech.grasshopper.pdf.extent.ExtentPDFCucumberReporter$1.onNext(ExtentPDFCucumberReporter.java:49)
	at io.reactivex.rxjava3.subjects.PublishSubject$PublishDisposable.onNext(PublishSubject.java:310)
	at io.reactivex.rxjava3.subjects.PublishSubject.onNext(PublishSubject.java:226)
	at com.aventstack.extentreports.ReactiveSubject.onFlush(ReactiveSubject.java:83)
	at com.aventstack.extentreports.AbstractProcessor.onFlush(AbstractProcessor.java:96)
	at com.aventstack.extentreports.ExtentReports.flush(ExtentReports.java:279)
	at com.aventstack.extentreports.service.ExtentService.flush(ExtentService.java:47)
	at com.aventstack.extentreports.cucumber.adapter.ExtentCucumberAdapter.finishReport(ExtentCucumberAdapter.java:301)
	at com.aventstack.extentreports.cucumber.adapter.ExtentCucumberAdapter$8.receive(ExtentCucumberAdapter.java:137)
	at com.aventstack.extentreports.cucumber.adapter.ExtentCucumberAdapter$8.receive(ExtentCucumberAdapter.java:134)
	at io.cucumber.core.eventbus.AbstractEventPublisher.send(AbstractEventPublisher.java:51)
	at io.cucumber.core.eventbus.AbstractEventBus.send(AbstractEventBus.java:12)
	at io.cucumber.core.runtime.SynchronizedEventBus.send(SynchronizedEventBus.java:47)
	at io.cucumber.core.runtime.CucumberExecutionContext.emitTestRunFinished(CucumberExecutionContext.java:117)
	at io.cucumber.core.runtime.CucumberExecutionContext.finishTestRun(CucumberExecutionContext.java:104)
	at io.cucumber.core.runtime.CucumberExecutionContext.runFeatures(CucumberExecutionContext.java:152)
	at io.cucumber.junit.Cucumber$StartAndFinishTestRun.evaluate(Cucumber.java:229)
	at org.junit.runners.ParentRunner$3.evaluate(ParentRunner.java:306)
	at org.junit.runners.ParentRunner.run(ParentRunner.java:413)
	at org.junit.runner.JUnitCore.run(JUnitCore.java:137)
	at org.junit.runner.JUnitCore.run(JUnitCore.java:115)
	at org.junit.vintage.engine.execution.RunnerExecutor.execute(RunnerExecutor.java:42)
	at org.junit.vintage.engine.VintageTestEngine.executeAllChildren(VintageTestEngine.java:80)
	at org.junit.vintage.engine.VintageTestEngine.execute(VintageTestEngine.java:72)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:198)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:169)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:93)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.lambda$execute$0(EngineExecutionOrchestrator.java:58)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.withInterceptedStreams(EngineExecutionOrchestrator.java:141)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:57)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:103)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:85)
	at org.junit.platform.launcher.core.DelegatingLauncher.execute(DelegatingLauncher.java:47)
	at org.junit.platform.launcher.core.SessionPerRequestLauncher.execute(SessionPerRequestLauncher.java:63)
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.execute(JUnitPlatformProvider.java:188)
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invokeAllTests(JUnitPlatformProvider.java:154)
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invoke(JUnitPlatformProvider.java:128)
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:428)
	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:162)
	at org.apache.maven.surefire.booter.ForkedBooter.run(ForkedBooter.java:562)
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:548)

[INFO] Tests run: 98, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 292.986 s - in testRunner.Runner
[INFO] 
[INFO] Results:
[INFO] 
[INFO] Tests run: 98, Failures: 0, Errors: 0, Skipped: 0
[INFO] 
[INFO] 
[INFO] --- maven-jar-plugin:2.4:jar (default-jar) @ wealth-icos-api ---
[INFO] Building jar: C:\Users\girdd\IdeaProjects\icosapitests\target\wealth-icos-api-1.0-SNAPSHOT.jar
[INFO] 
[INFO] --- maven-install-plugin:2.4:install (default-install) @ wealth-icos-api ---
[INFO] Installing C:\Users\girdd\IdeaProjects\icosapitests\target\wealth-icos-api-1.0-SNAPSHOT.jar to C:\dev\maven\repository\org\example\wealth-icos-api\1.0-SNAPSHOT\wealth-icos-api-1.0-SNAPSHOT.jar
[INFO] Installing C:\Users\girdd\IdeaProjects\icosapitests\pom.xml to C:\dev\maven\repository\org\example\wealth-icos-api\1.0-SNAPSHOT\wealth-icos-api-1.0-SNAPSHOT.pom
[INFO] ------------------------------------------------------------------------
[INFO] BUILD SUCCESS
[INFO] ------------------------------------------------------------------------
[INFO] Total time:  06:13 min
[INFO] Finished at: 2025-06-05T06:29:37+01:00
[INFO] ------------------------------------------------------------------------

Process finished with exit code 0
