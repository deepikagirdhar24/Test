import org.apache.commons.lang3.StringUtils;

@And("I verify the Money Account API 500 error response with message {string}")
public void iVerify500ErrorResponse(String expectedError) throws Exception {
    String actualError = jsonHelper.extractStringField(response, "error");
    ExtentCucumberAdapter.addTestStepLog("Actual: " + actualError + " | Expected: " + expectedError);

    String expected = StringUtils.strip(expectedError, "*").trim();

    boolean matches = expectedError.startsWith("*") && expectedError.endsWith("*") ? actualError.contains(expected)
                    : expectedError.startsWith("*")                               ? actualError.endsWith(expected)
                    : expectedError.endsWith("*")                                 ? actualError.startsWith(expected)
                    : actualError.equals(expected);

    Assert.assertTrue(matches, "Expected pattern mismatch. Actual: " + actualError);
}
