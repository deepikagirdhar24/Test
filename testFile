Feature: Verify Address API

  Scenario Outline: Verify the Get Address API 
    Given Send Request to get Authentication Token for ICOS
    When I generate the JWT Token
    Then Send request to get Address Information
    And I verify the Status Code for Address "200"
    And I verify the following fields in Address response:
      | id               | <id>               |
      | firstName        | <firstName>        |
      | middleName       | <middleName>       |
      | lastName         | <lastName>         |
      | firm             | <firm>             |
      | salutation       | <salutation>       |
      | salutationLetter | <salutationLetter> |
      | attnOf           | <attnOf>           |
      | crof             | <crof>             |
      | residency        | <residency>        |
      | streetNr         | <streetNr>         |
      | street           | <street>           |
      | streetAdd        | <streetAdd>        |
      | poBox            | <poBox>            |
      | city             | <city>             |
      | state            | <state>            |
      | zip              | <zip>              |
      | country          | <country>          |

    Examples:
      | id | firstName | middleName | lastName | firm | salutation | salutationLetter | attnOf       | crof       | residency | streetNr | street           | streetAdd       | poBox       | city   | state | zip  | country |
      | 0  | First     | Middle     | Last     | Firm | mr         | mr               | Attention Of | c/0 Name   | Residency | StreetNr | Street name      | Street Addition | P.O.Box 123 | Zurich | ZH    | 8001 | CH      |

@Then("I verify the following fields in Address response:")
public void verifyMultipleFields(DataTable dataTable) {
    Map<String, String> expectedValues = dataTable.asMap();
    for (Map.Entry<String, String> entry : expectedValues.entrySet()) {
        String key = entry.getKey();
        String expectedValue = entry.getValue();
        String actualValue = JsonHelper.getValue(response, key);
        Assert.assertEquals(actualValue, expectedValue, "Mismatch for field: " + key);
    }
}
